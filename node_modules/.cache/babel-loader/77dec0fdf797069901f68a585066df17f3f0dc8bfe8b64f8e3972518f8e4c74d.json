{"ast":null,"code":"var _jsxFileName = \"D:\\\\Workspace\\\\project-calc-resource\\\\src\\\\components\\\\calculators\\\\TPCCCalculator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Grid, TextField, Typography, Button, Paper, Box, Alert } from '@mui/material';\nimport { calculateTPCC, calculatePeakTPS, calculateServerResources, BASELINE_SINGLE_CORE } from '../../services/performanceCalculator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst STORAGE_KEY = 'tpccCalculatorData';\nexport default function TPCCCalculator({\n  onResultChange\n}) {\n  _s();\n  const [inputs, setInputs] = useState(() => {\n    // 从localStorage读取初始数据\n    const savedData = localStorage.getItem(STORAGE_KEY);\n    return savedData ? JSON.parse(savedData) : {\n      warehouseCount: '',\n      tpmC: '',\n      systemRedundancy: '',\n      nonDbResourcePercentage: ''\n    };\n  });\n  const handleInputChange = field => event => {\n    const value = event.target.value;\n    setInputs(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n  useEffect(() => {\n    // 保存到localStorage\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(inputs));\n\n    // 计算结果\n    const {\n      warehouseCount,\n      tpmC,\n      systemRedundancy,\n      nonDbResourcePercentage\n    } = inputs;\n    const W = parseFloat(warehouseCount) || 0;\n    const T = parseFloat(tpmC) || 0;\n    const R = parseFloat(systemRedundancy) || 0;\n    const N = parseFloat(nonDbResourcePercentage) || 0;\n    let result = 0;\n    let explanation = '';\n    if (W > 0 && T > 0) {\n      const denominator = 1 - R / 100 - N / 100;\n      if (denominator > 0) {\n        result = W * T / denominator;\n        explanation = `\n          计算过程说明：\n          1. 仓库数量 (W) = ${W}\n          2. 每分钟事务数 (T) = ${T}\n          3. 系统冗余率 (R) = ${R}%\n          4. 非数据库资源占比 (N) = ${N}%\n          5. TPC-C 得分 = (W × T) / (1 - R% - N%)\n          6. 最终结果 = (${W} × ${T}) / (1 - ${R}/100 - ${N}/100) = ${result.toFixed(2)}\n        `;\n      } else {\n        explanation = '错误：系统冗余率与非数据库资源占比之和不能大于或等于100%';\n      }\n    }\n    onResultChange({\n      coreCount: Math.ceil(result),\n      explanation\n    });\n  }, [inputs, onResultChange]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    component: Paper,\n    p: 3,\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"TPC-C \\u8BA1\\u7B97\\u5668\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"\\u4ED3\\u5E93\\u6570\\u91CF\",\n          type: \"number\",\n          value: inputs.warehouseCount,\n          onChange: handleInputChange('warehouseCount'),\n          helperText: \"\\u8F93\\u5165\\u7CFB\\u7EDF\\u4E2D\\u7684\\u4ED3\\u5E93\\u6570\\u91CF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"\\u6BCF\\u5206\\u949F\\u4E8B\\u52A1\\u6570(tpmC)\",\n          type: \"number\",\n          value: inputs.tpmC,\n          onChange: handleInputChange('tpmC'),\n          helperText: \"\\u8F93\\u5165\\u6BCF\\u5206\\u949F\\u7684\\u4E8B\\u52A1\\u5904\\u7406\\u6570\\u91CF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"\\u7CFB\\u7EDF\\u5197\\u4F59\\u7387(%)\",\n          type: \"number\",\n          value: inputs.systemRedundancy,\n          onChange: handleInputChange('systemRedundancy'),\n          helperText: \"\\u8F93\\u5165\\u7CFB\\u7EDF\\u9884\\u7559\\u7684\\u5197\\u4F59\\u7387\\u767E\\u5206\\u6BD4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"\\u975E\\u6570\\u636E\\u5E93\\u8D44\\u6E90\\u5360\\u6BD4(%)\",\n          type: \"number\",\n          value: inputs.nonDbResourcePercentage,\n          onChange: handleInputChange('nonDbResourcePercentage'),\n          helperText: \"\\u8F93\\u5165\\u975E\\u6570\\u636E\\u5E93\\u5360\\u7528\\u7684\\u7CFB\\u7EDF\\u8D44\\u6E90\\u767E\\u5206\\u6BD4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), parseFloat(inputs.systemRedundancy) + parseFloat(inputs.nonDbResourcePercentage) >= 100 && /*#__PURE__*/_jsxDEV(Box, {\n      mt: 2,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        children: \"\\u7CFB\\u7EDF\\u5197\\u4F59\\u7387\\u4E0E\\u975E\\u6570\\u636E\\u5E93\\u8D44\\u6E90\\u5360\\u6BD4\\u4E4B\\u548C\\u4E0D\\u80FD\\u5927\\u4E8E\\u6216\\u7B49\\u4E8E100%\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(TPCCCalculator, \"tw1SZHR65AJYW6pKw549+eRtlfw=\");\n_c = TPCCCalculator;\nvar _c;\n$RefreshReg$(_c, \"TPCCCalculator\");","map":{"version":3,"names":["React","useState","useEffect","Grid","TextField","Typography","Button","Paper","Box","Alert","calculateTPCC","calculatePeakTPS","calculateServerResources","BASELINE_SINGLE_CORE","jsxDEV","_jsxDEV","STORAGE_KEY","TPCCCalculator","onResultChange","_s","inputs","setInputs","savedData","localStorage","getItem","JSON","parse","warehouseCount","tpmC","systemRedundancy","nonDbResourcePercentage","handleInputChange","field","event","value","target","prev","setItem","stringify","W","parseFloat","T","R","N","result","explanation","denominator","toFixed","coreCount","Math","ceil","component","p","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","container","spacing","item","xs","sm","fullWidth","label","type","onChange","helperText","mt","severity","_c","$RefreshReg$"],"sources":["D:/Workspace/project-calc-resource/src/components/calculators/TPCCCalculator.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Grid,\r\n  TextField,\r\n  Typography,\r\n  Button,\r\n  Paper,\r\n  Box,\r\n  Alert\r\n} from '@mui/material';\r\nimport {\r\n  calculateTPCC,\r\n  calculatePeakTPS,\r\n  calculateServerResources,\r\n  BASELINE_SINGLE_CORE\r\n} from '../../services/performanceCalculator';\r\n\r\nconst STORAGE_KEY = 'tpccCalculatorData';\r\n\r\nexport default function TPCCCalculator({ onResultChange }) {\r\n  const [inputs, setInputs] = useState(() => {\r\n    // 从localStorage读取初始数据\r\n    const savedData = localStorage.getItem(STORAGE_KEY);\r\n    return savedData ? JSON.parse(savedData) : {\r\n      warehouseCount: '',\r\n      tpmC: '',\r\n      systemRedundancy: '',\r\n      nonDbResourcePercentage: ''\r\n    };\r\n  });\r\n\r\n  const handleInputChange = (field) => (event) => {\r\n    const value = event.target.value;\r\n    setInputs(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    // 保存到localStorage\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(inputs));\r\n\r\n    // 计算结果\r\n    const {\r\n      warehouseCount,\r\n      tpmC,\r\n      systemRedundancy,\r\n      nonDbResourcePercentage\r\n    } = inputs;\r\n\r\n    const W = parseFloat(warehouseCount) || 0;\r\n    const T = parseFloat(tpmC) || 0;\r\n    const R = parseFloat(systemRedundancy) || 0;\r\n    const N = parseFloat(nonDbResourcePercentage) || 0;\r\n\r\n    let result = 0;\r\n    let explanation = '';\r\n\r\n    if (W > 0 && T > 0) {\r\n      const denominator = 1 - (R / 100) - (N / 100);\r\n      if (denominator > 0) {\r\n        result = (W * T) / denominator;\r\n        explanation = `\r\n          计算过程说明：\r\n          1. 仓库数量 (W) = ${W}\r\n          2. 每分钟事务数 (T) = ${T}\r\n          3. 系统冗余率 (R) = ${R}%\r\n          4. 非数据库资源占比 (N) = ${N}%\r\n          5. TPC-C 得分 = (W × T) / (1 - R% - N%)\r\n          6. 最终结果 = (${W} × ${T}) / (1 - ${R}/100 - ${N}/100) = ${result.toFixed(2)}\r\n        `;\r\n      } else {\r\n        explanation = '错误：系统冗余率与非数据库资源占比之和不能大于或等于100%';\r\n      }\r\n    }\r\n\r\n    onResultChange({\r\n      coreCount: Math.ceil(result),\r\n      explanation\r\n    });\r\n  }, [inputs, onResultChange]);\r\n\r\n  return (\r\n    <Box component={Paper} p={3}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        TPC-C 计算器\r\n      </Typography>\r\n      \r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"仓库数量\"\r\n            type=\"number\"\r\n            value={inputs.warehouseCount}\r\n            onChange={handleInputChange('warehouseCount')}\r\n            helperText=\"输入系统中的仓库数量\"\r\n          />\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"每分钟事务数(tpmC)\"\r\n            type=\"number\"\r\n            value={inputs.tpmC}\r\n            onChange={handleInputChange('tpmC')}\r\n            helperText=\"输入每分钟的事务处理数量\"\r\n          />\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"系统冗余率(%)\"\r\n            type=\"number\"\r\n            value={inputs.systemRedundancy}\r\n            onChange={handleInputChange('systemRedundancy')}\r\n            helperText=\"输入系统预留的冗余率百分比\"\r\n          />\r\n        </Grid>\r\n        \r\n        <Grid item xs={12} sm={6}>\r\n          <TextField\r\n            fullWidth\r\n            label=\"非数据库资源占比(%)\"\r\n            type=\"number\"\r\n            value={inputs.nonDbResourcePercentage}\r\n            onChange={handleInputChange('nonDbResourcePercentage')}\r\n            helperText=\"输入非数据库占用的系统资源百分比\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {parseFloat(inputs.systemRedundancy) + parseFloat(inputs.nonDbResourcePercentage) >= 100 && (\r\n        <Box mt={2}>\r\n          <Alert severity=\"error\">\r\n            系统冗余率与非数据库资源占比之和不能大于或等于100%\r\n          </Alert>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}