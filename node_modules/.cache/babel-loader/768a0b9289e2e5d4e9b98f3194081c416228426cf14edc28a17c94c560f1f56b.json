{"ast":null,"code":"import React from'react';import{Paper,Typography,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Box}from'@mui/material';import{calculateServerResources,BASELINE_SINGLE_CORE}from'../services/performanceCalculator';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ResourceSummary(_ref){var _results$tpcc,_results$specjbb;let{results}=_ref;const serverResources=calculateServerResources({tpccValue:((_results$tpcc=results.tpcc)===null||_results$tpcc===void 0?void 0:_results$tpcc.tpccValue)||0,specjbbValue:((_results$specjbb=results.specjbb)===null||_results$specjbb===void 0?void 0:_results$specjbb.specjbbValue)||0,baselineSingleCore:BASELINE_SINGLE_CORE});const generateSummaryText=()=>{var _results$specjbb2,_results$specjbb2$spe,_results$tpcc2,_results$tpcc2$tpccVa,_results$tpcc3,_results$tpcc3$tpccVa,_results$specjbb3,_results$specjbb3$spe;return\"\\n\\u7EFC\\u4E0A\\uFF0C\\u5E73\\u53F0\\u7684\\u603B\\u4F53\\u5904\\u7406\\u91CF\\u5982\\u4E0B\\uFF1A\\n\\u88682 \\u5E73\\u53F0\\u603B\\u4F53\\u5904\\u7406\\u91CF\\n\\u5E8F\\u53F7\\t\\u5E94\\u7528\\u7A0B\\u5E8F\\u5904\\u7406\\u91CF\\uFF08Specjbb2005\\uFF09\\t\\u6570\\u636E\\u5E93\\u5904\\u7406\\u91CF\\uFF08TPC-C\\uFF09\\n1\\t\".concat(((_results$specjbb2=results.specjbb)===null||_results$specjbb2===void 0?void 0:(_results$specjbb2$spe=_results$specjbb2.specjbbValue)===null||_results$specjbb2$spe===void 0?void 0:_results$specjbb2$spe.toLocaleString())||'-',\"\\t\").concat(((_results$tpcc2=results.tpcc)===null||_results$tpcc2===void 0?void 0:(_results$tpcc2$tpccVa=_results$tpcc2.tpccValue)===null||_results$tpcc2$tpccVa===void 0?void 0:_results$tpcc2$tpccVa.toLocaleString())||'-',\"\\n\\n3.1.2.1.3.2.4 \\u670D\\u52A1\\u5668\\u53C2\\u8003\\u57FA\\u51C6\\n\\u7531\\u4E8E\\u670D\\u52A1\\u5668CPU\\u5904\\u7406\\u80FD\\u529B\\u4EC5\\u6709\\u90E8\\u5206\\u578B\\u53F7\\u53C2\\u8003\\uFF0C\\u53C2\\u7167E5-4820 V3\\u7CFB\\u5217\\u5904\\u7406\\u5668\\uFF08\\u4E3B\\u98911.9GHz\\u300110\\u6838\\u5FC3\\u300116G\\u5185\\u5B58\\u3001500G\\u786C\\u76D8\\uFF09\\u7684TPC-C\\u3001Specjbb2005\\u6709\\u5173\\u6D4B\\u7B97\\u7ED3\\u679C\\u6362\\u7B97\\u81F3\\u76EE\\u524D\\u4E3B\\u6D41CPU\\u5355\\u6838\\u5FC3\\uFF08\\u4E3B\\u98912.2GHz\\uFF09\\uFF0C\\u7ED3\\u679C\\u5982\\u4E0B\\uFF1A\\n\\n\\u88683 \\u670D\\u52A1\\u5668\\u6027\\u80FD\\u6D4B\\u7B97\\u57FA\\u51C6\\u53C2\\u8003\\u503C\\nCPU\\tSPECjbb2005\\tTPC-C\\nE5-4820 V3\\t1023421\\t690926\\n\\u6298\\u7B97\\u5355\\u6838\\u5FC3\\uFF082.2GHz\\uFF09\\t118501\\t80002\\n\\n\\u57FA\\u4E8E\\u4E0A\\u8868\\u6298\\u7B97\\u6240\\u9700\\u670D\\u52A1\\u5668\\u6570\\u91CF\\uFF1A\\n1. \\u6240\\u9700\\u6570\\u636E\\u5E93\\u670D\\u52A1\\u5668\\u8D44\\u6E90\\u6570\\u91CF\\uFF08\\u6838\\u6570\\uFF09= \").concat(((_results$tpcc3=results.tpcc)===null||_results$tpcc3===void 0?void 0:(_results$tpcc3$tpccVa=_results$tpcc3.tpccValue)===null||_results$tpcc3$tpccVa===void 0?void 0:_results$tpcc3$tpccVa.toLocaleString())||'-',\" / \").concat(BASELINE_SINGLE_CORE.tpcc,\" / (1 - 10%) = \").concat(serverResources.dbServerCores,\"\\u6838\\n2. \\u6240\\u9700\\u5E94\\u7528\\u670D\\u52A1\\u5668\\u8D44\\u6E90\\u6570\\u91CF\\uFF08\\u6838\\u6570\\uFF09= \").concat(((_results$specjbb3=results.specjbb)===null||_results$specjbb3===void 0?void 0:(_results$specjbb3$spe=_results$specjbb3.specjbbValue)===null||_results$specjbb3$spe===void 0?void 0:_results$specjbb3$spe.toLocaleString())||'-',\" / \").concat(BASELINE_SINGLE_CORE.specjbb,\" / (1 - 10%) = \").concat(serverResources.appServerCores,\"\\u6838\\n\\n\\u6CE8\\uFF1A\\u8BA1\\u7B97\\u7ED3\\u679C\\u5DF2\\u8003\\u865110%\\u865A\\u62DF\\u5316\\u5F00\\u9500\\u3002\");};return/*#__PURE__*/_jsx(Box,{children:(results.specjbb||results.tpcc)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Paper,{elevation:2,sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"\\u8D44\\u6E90\\u9700\\u6C42\\u6C47\\u603B\"}),/*#__PURE__*/_jsx(Typography,{component:\"pre\",sx:{whiteSpace:'pre-wrap'},children:generateSummaryText()})]})})});}","map":{"version":3,"names":["React","Paper","Typography","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Box","calculateServerResources","BASELINE_SINGLE_CORE","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResourceSummary","_ref","_results$tpcc","_results$specjbb","results","serverResources","tpccValue","tpcc","specjbbValue","specjbb","baselineSingleCore","generateSummaryText","_results$specjbb2","_results$specjbb2$spe","_results$tpcc2","_results$tpcc2$tpccVa","_results$tpcc3","_results$tpcc3$tpccVa","_results$specjbb3","_results$specjbb3$spe","concat","toLocaleString","dbServerCores","appServerCores","children","elevation","sx","p","variant","gutterBottom","component","whiteSpace"],"sources":["D:/Workspace/project-calc-resource/src/components/ResourceSummary.js"],"sourcesContent":["import React from 'react';\r\nimport {\r\n  Paper,\r\n  Typography,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Box\r\n} from '@mui/material';\r\nimport { calculateServerResources, BASELINE_SINGLE_CORE } from '../services/performanceCalculator';\r\n\r\nexport default function ResourceSummary({ results }) {\r\n  const serverResources = calculateServerResources({\r\n    tpccValue: results.tpcc?.tpccValue || 0,\r\n    specjbbValue: results.specjbb?.specjbbValue || 0,\r\n    baselineSingleCore: BASELINE_SINGLE_CORE\r\n  });\r\n\r\n  const generateSummaryText = () => {\r\n    return `\r\n综上，平台的总体处理量如下：\r\n表2 平台总体处理量\r\n序号\\t应用程序处理量（Specjbb2005）\\t数据库处理量（TPC-C）\r\n1\\t${results.specjbb?.specjbbValue?.toLocaleString() || '-'}\\t${results.tpcc?.tpccValue?.toLocaleString() || '-'}\r\n\r\n3.1.2.1.3.2.4 服务器参考基准\r\n由于服务器CPU处理能力仅有部分型号参考，参照E5-4820 V3系列处理器（主频1.9GHz、10核心、16G内存、500G硬盘）的TPC-C、Specjbb2005有关测算结果换算至目前主流CPU单核心（主频2.2GHz），结果如下：\r\n\r\n表3 服务器性能测算基准参考值\r\nCPU\\tSPECjbb2005\\tTPC-C\r\nE5-4820 V3\\t1023421\\t690926\r\n折算单核心（2.2GHz）\\t118501\\t80002\r\n\r\n基于上表折算所需服务器数量：\r\n1. 所需数据库服务器资源数量（核数）= ${results.tpcc?.tpccValue?.toLocaleString() || '-'} / ${BASELINE_SINGLE_CORE.tpcc} / (1 - 10%) = ${serverResources.dbServerCores}核\r\n2. 所需应用服务器资源数量（核数）= ${results.specjbb?.specjbbValue?.toLocaleString() || '-'} / ${BASELINE_SINGLE_CORE.specjbb} / (1 - 10%) = ${serverResources.appServerCores}核\r\n\r\n注：计算结果已考虑10%虚拟化开销。`;\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      {(results.specjbb || results.tpcc) && (\r\n        <>\r\n          {/* <Paper elevation={2} sx={{ p: 2, mb: 2 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              性能测算说明\r\n            </Typography>\r\n            {results.specjbb?.explanation && (\r\n              <Typography component=\"pre\" sx={{ whiteSpace: 'pre-wrap', mb: 2 }}>\r\n                {results.specjbb.explanation}\r\n              </Typography>\r\n            )}\r\n            {results.tpcc?.explanation && (\r\n              <Typography component=\"pre\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n                {results.tpcc.explanation}\r\n              </Typography>\r\n            )}\r\n          </Paper> */}\r\n\r\n          <Paper elevation={2} sx={{ p: 2 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              资源需求汇总\r\n            </Typography>\r\n            <Typography component=\"pre\" sx={{ whiteSpace: 'pre-wrap' }}>\r\n              {generateSummaryText()}\r\n            </Typography>\r\n          </Paper>\r\n        </>\r\n      )}\r\n    </Box>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}